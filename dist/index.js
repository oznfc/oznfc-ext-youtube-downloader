var tQ=Object.defineProperty;var eQ=(F,Q)=>{for(var $ in Q)tQ(F,$,{get:Q[$],enumerable:!0,configurable:!0,set:(H)=>Q[$]=()=>H})};var PF="__DESTROY__";var qF=class{name="worker-child-io";messageQueue=[];resolveRead=null;constructor(){self.onmessage=this.handleMessage}handleMessage=(F)=>{let Q=F.data;if(Q===PF){this.destroy();return}if(this.resolveRead)this.resolveRead(Q),this.resolveRead=null;else this.messageQueue.push(Q)};async read(){if(this.messageQueue.length>0)return this.messageQueue.shift()??null;return new Promise((F)=>{this.resolveRead=F})}async write(F){self.postMessage(F)}destroy(){self.postMessage(PF),self.close()}signalDestroy(){self.postMessage(PF)}};function aQ(F,Q){if(Q instanceof Uint8Array)return{type:"Uint8Array",data:Array.from(Q)};return Q}function F$(F,Q){if(Q&&Q.type==="Uint8Array"&&Array.isArray(Q.data))return new Uint8Array(Q.data);return Q}function s(F){return JSON.stringify(F,aQ)+`
`}function sF(F){return new Promise((Q,$)=>{try{let H=JSON.parse(F,F$);Q(H)}catch(H){console.error("failed to parse message",typeof F,F,H),$(H)}})}function ZF(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var _=class{constructor(F,Q){this.io=F,this.apiImplementation=Q?.expose,this.listen()}pendingRequests={};callbacks={};callbackCache=new Map;count=0;messageStr="";apiImplementation;expose(F){this.apiImplementation=F}getIO(){return this.io}async listen(){while(!0){let F=await this.io.read();if(!F)continue;let Q=F.toString("utf-8");if(Q.trim().length===0)continue;this.messageStr+=Q;let $=this.messageStr[this.messageStr.length-1],H=this.messageStr.split(`
`),M=$===`
`?H:H.slice(0,-1);this.messageStr=$===`
`?"":H.at(-1)??"";for(let w of M.map((X)=>X.trim()).filter(Boolean))if(w.startsWith("{"))this.handleMessageStr(w);else console.log("(kkrpc stdout passthrough):",w)}}async handleMessageStr(F){return this.count++,sF(F).then((Q)=>{if(Q.type==="response")this.handleResponse(Q);else if(Q.type==="request")this.handleRequest(Q);else if(Q.type==="callback")this.handleCallback(Q);else console.error("received unknown message type",Q,typeof Q)}).catch((Q)=>{console.log("(kkrpc stdout passthrough):",F)})}callMethod(F,Q){return new Promise(($,H)=>{let M=ZF();this.pendingRequests[M]={resolve:$,reject:H};let w=[],X=Q.map((O)=>{if(typeof O==="function"){let R=this.callbackCache.get(O);if(!R)R=ZF(),this.callbacks[R]=O,this.callbackCache.set(O,R);return w.push(R),`__callback__${R}`}return O}),T={id:M,method:F,args:X,type:"request",callbackIds:w.length>0?w:void 0};this.io.write(s(T))})}handleResponse(F){let{id:Q}=F,{result:$,error:H}=F.args;if(this.pendingRequests[Q]){if(H)this.pendingRequests[Q].reject(new Error(H));else this.pendingRequests[Q].resolve($);delete this.pendingRequests[Q]}}handleRequest(F){let{id:Q,method:$,args:H}=F,M=$.split(".");if(!this.apiImplementation)return;let w=this.apiImplementation;for(let R=0;R<M.length-1;R++)if(w=w[M[R]],!w){this.sendError(Q,`Method path ${$} not found at ${M[R]}`);return}let X=M[M.length-1],T=w[X];if(typeof T!=="function"){this.sendError(Q,`Method ${$} is not a function`);return}let O=H.map((R)=>{if(typeof R==="string"&&R.startsWith("__callback__")){let A=R.slice(12);return(...b)=>{this.invokeCallback(A,b)}}return R});try{let R=T.apply(w,O);Promise.resolve(R).then((A)=>{return this.sendResponse(Q,A)}).catch((A)=>this.sendError(Q,A.message))}catch(R){this.sendError(Q,R.message??R.toString())}}invokeCallback(F,Q){let $={id:ZF(),method:F,args:Q,type:"callback"};this.io.write(s($))}handleCallback(F){let{method:Q,args:$}=F,H=this.callbacks[Q];if(H)H(...$);else console.error(`Callback with id ${Q} not found`)}sendResponse(F,Q){let $={id:F,method:"",args:{result:Q},type:"response"};this.io.write(s($))}sendError(F,Q){let $={id:F,method:"",args:{error:Q},type:"response"};this.io.write(s($))}createNestedProxy(F=[]){return new Proxy(()=>{},{get:(Q,$)=>{if(typeof $==="string"&&$!=="then")return this.createNestedProxy([...F,$]);return},apply:(Q,$,H)=>{let M=F.join(".");return this.callMethod(M,H)}})}getAPI(){return this.createNestedProxy()}freeCallbacks(){this.callbacks={},this.callbackCache.clear()}};function C(F,Q,$,H){if($==="a"&&!H)throw new TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?F!==Q||!H:!Q.has(F))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $==="m"?H:$==="a"?H.call(F):H?H.value:Q.get(F)}function MF(F,Q,$,H,M){if(H==="m")throw new TypeError("Private method is not writable");if(H==="a"&&!M)throw new TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?F!==Q||!M:!Q.has(F))throw new TypeError("Cannot write private member to an object whose class did not declare it");return H==="a"?M.call(F,$):M?M.value=$:Q.set(F,$),$}var r,I,o,Q$,tF="__TAURI_TO_IPC_KEY__";function eF(F,Q=!1){return window.__TAURI_INTERNALS__.transformCallback(F,Q)}class SF{constructor(){this.__TAURI_CHANNEL_MARKER__=!0,r.set(this,()=>{}),I.set(this,0),o.set(this,[]),this.id=eF(({message:F,id:Q})=>{if(Q==C(this,I,"f")){C(this,r,"f").call(this,F),MF(this,I,C(this,I,"f")+1,"f");while(C(this,I,"f")in C(this,o,"f")){let $=C(this,o,"f")[C(this,I,"f")];C(this,r,"f").call(this,$),delete C(this,o,"f")[C(this,I,"f")],MF(this,I,C(this,I,"f")+1,"f")}}else C(this,o,"f")[Q]=F})}set onmessage(F){MF(this,r,F,"f")}get onmessage(){return C(this,r,"f")}[(r=new WeakMap,I=new WeakMap,o=new WeakMap,tF)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[tF]()}}Q$=new WeakMap;var aF;(function(F){F.WINDOW_RESIZED="tauri://resize",F.WINDOW_MOVED="tauri://move",F.WINDOW_CLOSE_REQUESTED="tauri://close-requested",F.WINDOW_DESTROYED="tauri://destroyed",F.WINDOW_FOCUS="tauri://focus",F.WINDOW_BLUR="tauri://blur",F.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",F.WINDOW_THEME_CHANGED="tauri://theme-changed",F.WINDOW_CREATED="tauri://window-created",F.WEBVIEW_CREATED="tauri://webview-created",F.DRAG_ENTER="tauri://drag-enter",F.DRAG_OVER="tauri://drag-over",F.DRAG_DROP="tauri://drag-drop",F.DRAG_LEAVE="tauri://drag-leave"})(aF||(aF={}));var e;(function(F){F[F.Audio=1]="Audio",F[F.Cache=2]="Cache",F[F.Config=3]="Config",F[F.Data=4]="Data",F[F.LocalData=5]="LocalData",F[F.Document=6]="Document",F[F.Download=7]="Download",F[F.Picture=8]="Picture",F[F.Public=9]="Public",F[F.Video=10]="Video",F[F.Resource=11]="Resource",F[F.Temp=12]="Temp",F[F.AppConfig=13]="AppConfig",F[F.AppData=14]="AppData",F[F.AppLocalData=15]="AppLocalData",F[F.AppCache=16]="AppCache",F[F.AppLog=17]="AppLog",F[F.Desktop=18]="Desktop",F[F.Executable=19]="Executable",F[F.Font=20]="Font",F[F.Home=21]="Home",F[F.Runtime=22]="Runtime",F[F.Template=23]="Template"})(e||(e={}));var FQ;(function(F){F[F.Trace=1]="Trace",F[F.Debug=2]="Debug",F[F.Info=3]="Info",F[F.Warn=4]="Warn",F[F.Error=5]="Error"})(FQ||(FQ={}));function EF(F){return async function Q($,H){console.log("fetch",$,H);let M=H?.maxRedirections,w=H?.connectTimeout,X=H?.proxy;if(H!=null)delete H.maxRedirections,delete H.connectTimeout,delete H.proxy;let T=H?.signal,R=(H?.headers==null?[]:H.headers instanceof Headers?Array.from(H.headers.entries()):Array.isArray(H.headers)?H.headers:Object.entries(H.headers)).map(([j,u])=>[j,typeof u==="string"?u:u.toString()]),A=new Request($,H),b=await A.arrayBuffer(),NF=b.byteLength!==0?Array.from(new Uint8Array(b)):null,JF=await F.rawFetch({clientConfig:{method:A.method,url:A.url,headers:R,data:NF,maxRedirections:M,connectTimeout:w,proxy:X}});T?.addEventListener("abort",()=>{F.fetchCancel(JF)});let{status:BF,statusText:bF,url:CF,headers:L,rid:l}=await F.fetchSend(JF),S=await F.fetchReadBody(l),UF=new Response(S instanceof ArrayBuffer&&S.byteLength!==0?S:S instanceof Array&&S.length>0?new Uint8Array(S):null,{headers:L,status:BF,statusText:bF});return Object.defineProperty(UF,"url",{value:CF}),UF}}class a{constructor(){this.eventListeners=Object.create(null)}addListener(F,Q){return this.on(F,Q)}removeListener(F,Q){return this.off(F,Q)}on(F,Q){if(F in this.eventListeners)this.eventListeners[F].push(Q);else this.eventListeners[F]=[Q];return this}once(F,Q){let $=(H)=>{this.removeListener(F,$),Q(H)};return this.addListener(F,$)}off(F,Q){if(F in this.eventListeners)this.eventListeners[F]=this.eventListeners[F].filter(($)=>$!==Q);return this}removeAllListeners(F){if(F)delete this.eventListeners[F];else this.eventListeners=Object.create(null);return this}emit(F,Q){if(F in this.eventListeners){let $=this.eventListeners[F];for(let H of $)H(Q);return!0}return!1}listenerCount(F){if(F in this.eventListeners)return this.eventListeners[F].length;return 0}prependListener(F,Q){if(F in this.eventListeners)this.eventListeners[F].unshift(Q);else this.eventListeners[F]=[Q];return this}prependOnceListener(F,Q){let $=(H)=>{this.removeListener(F,$),Q(H)};return this.prependListener(F,$)}}function IF(F){return{upload:(Q,$,H,M)=>F.upload(Q,$,H?H:void 0,M),download:(Q,$,H,M)=>F.download(Q,$,H?H:void 0,M)}}function QQ(F){return{onDragDrop:(Q)=>F.onDragDrop(Q),onDragEnter:(Q)=>F.onDragEnter(Q),onDragLeave:(Q)=>F.onDragLeave(Q),onDragOver:(Q)=>F.onDragOver(Q),onWindowBlur:(Q)=>F.onWindowBlur(Q),onWindowCloseRequested:(Q)=>F.onWindowCloseRequested(Q),onWindowFocus:(Q)=>F.onWindowFocus(Q)}}function $Q(F){return{BaseDirectory:e,appCacheDir:F.appCacheDir,appConfigDir:F.appConfigDir,appDataDir:F.appDataDir,appLocalDataDir:F.appLocalDataDir,appLogDir:F.appLogDir,audioDir:F.audioDir,basename:F.basename,cacheDir:F.cacheDir,configDir:F.configDir,dataDir:F.dataDir,delimiter:F.delimiter,desktopDir:F.desktopDir,dirname:F.dirname,documentDir:F.documentDir,downloadDir:F.downloadDir,executableDir:F.executableDir,extname:F.extname,fontDir:F.fontDir,homeDir:F.homeDir,isAbsolute:F.isAbsolute,join:F.join,localDataDir:F.localDataDir,normalize:F.normalize,pictureDir:F.pictureDir,publicDir:F.publicDir,resolve:F.resolve,resolveResource:F.resolveResource,resourceDir:F.resourceDir,runtimeDir:F.runtimeDir,sep:F.sep,tempDir:F.tempDir,templateDir:F.templateDir,videoDir:F.videoDir,extensionDir:F.extensionDir,extensionSupportDir:F.extensionSupportDir}}class FF{pid;api;constructor(F,Q){this.pid=F,this.api=Q}async write(F){this.api.stdinWrite(F.toString(),this.pid)}kill(){return this.api.kill(this.pid)}}class kF extends a{program;args;options;stdout=new a;stderr=new a;constructor(F,Q=[],$){super();this.program=F,this.args=typeof Q==="string"?[Q]:Q,this.options=$??{}}}class hF extends kF{api;constructor(F,Q=[],$,H){super(F,Q,H);this.api=$}async spawn(){let F=this.args;if(typeof F==="object")Object.freeze(F);return this.api.rawSpawn(this.program,F,this.options,(Q)=>{switch(Q.event){case"Error":this.emit("error",Q.payload);break;case"Terminated":this.emit("close",Q.payload);break;case"Stdout":this.stdout.emit("data",Q.payload);break;case"Stderr":this.stderr.emit("data",Q.payload);break}}).then(async(Q)=>{return await this.api.recordSpawnedProcess(Q),new FF(Q,this.api)})}async execute(){let F=this.args;if(typeof F==="object")Object.freeze(F);return this.api.execute(this.program,this.args,this.options)}}class _F extends kF{config;scriptPath;api;constructor(F,Q,$,H){super("deno",Q);this.config=$,this.scriptPath=F,this.api=H}execute(){return this.api.denoExecute(this.scriptPath,this.config,this.args)}spawn(){return this.api.denoRawSpawn(this.scriptPath,this.config,this.args,(F)=>{switch(F.event){case"Error":this.emit("error",F.payload);break;case"Terminated":this.emit("close",F.payload);break;case"Stdout":this.stdout.emit("data",F.payload);break;case"Stderr":this.stderr.emit("data",F.payload);break}}).then(async(F)=>{return console.log("spawned deno process",F),await this.api.recordSpawnedProcess(F),new FF(F,this.api)})}}class DF{readStream;childProcess;name="tauri-shell-stdio";constructor(F,Q){this.readStream=F;this.childProcess=Q}read(){return new Promise((F,Q)=>{this.readStream.on("data",($)=>{F($)})})}async write(F){return this.childProcess.write(F+`
`)}}function HQ(F){function Q(L,l=[],S){return new hF(L,l,F,S)}function $(L,l,S){return new _F(L,l,S,F)}async function H(L,l,S,UF){let j=$(L,l,S),u=await j.spawn(),sQ=new DF(j.stdout,u);return{rpcChannel:new _(sQ,{expose:UF}),process:u,command:j}}function M(L){return Q("bash",["-c",L])}function w(L){return Q("powershell",["-Command",L])}function X(L){return Q("osascript",["-e",L])}function T(L){return Q("python",["-c",L])}function O(L){return Q("zsh",["-c",L])}function R(L){return Q("node",["-e",L])}async function A(L){return M(L).execute()}async function b(L){return w(L).execute()}async function NF(L){return X(L).execute()}async function JF(L){return T(L).execute()}async function BF(L){return O(L).execute()}async function bF(L){return R(L).execute()}function CF(){return F.likelyOnWindows()}return{open:F.open,killPid:F.killPid,makeBashScript:M,makePowershellScript:w,makeAppleScript:X,makePythonScript:T,makeZshScript:O,makeNodeScript:R,executeBashScript:A,executePowershellScript:b,executeAppleScript:NF,executePythonScript:JF,executeZshScript:BF,executeNodeScript:bF,hasCommand:F.hasCommand,likelyOnWindows:CF,createCommand:Q,createDenoCommand:$,Child:FF,TauriShellStdio:DF,createDenoRpcChannel:H,RPCChannel:_,whereIsCommand:F.whereIsCommand}}function YQ(F){return{message:(Q,$,H)=>F.message(Q,$,H?H:void 0),info:(Q,$,H)=>F.info(Q,$,H?H:void 0),success:(Q,$,H)=>F.success(Q,$,H?H:void 0),warning:(Q,$,H)=>F.warning(Q,$,H?H:void 0),error:(Q,$,H)=>F.error(Q,$,H?H:void 0)}}class wF{searchTerm="";highlightedListItemValue;onSearchTermChange(F){return this.searchTerm=F,Promise.resolve()}onActionSelected(F){return Promise.resolve()}onEnterPressedOnSearchBar(){return Promise.resolve()}onFilesDropped(F){return Promise.resolve()}onBeforeGoBack(){return Promise.resolve()}onListItemSelected(F){return Promise.resolve()}onListScrolledToBottom(){return Promise.resolve()}onHighlightedListItemChanged(F){return this.highlightedListItemValue=F,Promise.resolve()}onFormSubmit(F){return Promise.resolve()}}var yF;function UQ(F){return{lang:F?.lang??yF?.lang,message:F?.message,abortEarly:F?.abortEarly??yF?.abortEarly,abortPipeEarly:F?.abortPipeEarly??yF?.abortPipeEarly}}var $$;function H$(F){return $$?.get(F)}var Y$;function J$(F){return Y$?.get(F)}var U$;function Z$(F,Q){return U$?.get(F)?.get(Q)}function p(F){let Q=typeof F;if(Q==="string")return`"${F}"`;if(Q==="number"||Q==="bigint"||Q==="boolean")return`${F}`;if(Q==="object"||Q==="function")return(F&&Object.getPrototypeOf(F)?.constructor?.name)??"null";return Q}function G(F,Q,$,H,M){let w=M&&"input"in M?M.input:$.value,X=M?.expected??F.expects??null,T=M?.received??p(w),O={kind:F.kind,type:F.type,input:w,expected:X,received:T,message:`Invalid ${Q}: ${X?`Expected ${X} but r`:"R"}eceived ${T}`,requirement:F.requirement,path:M?.path,issues:M?.issues,lang:H.lang,abortEarly:H.abortEarly,abortPipeEarly:H.abortPipeEarly},R=F.kind==="schema",A=M?.message??F.message??Z$(F.reference,O.lang)??(R?J$(O.lang):null)??H.message??H$(O.lang);if(A!==void 0)O.message=typeof A==="function"?A(O):A;if(R)$.typed=!1;if($.issues)$.issues.push(O);else $.issues=[O]}function N(F){return{version:1,vendor:"valibot",validate(Q){return F["~run"]({value:Q},UQ())}}}function M$(F,Q){return Object.hasOwn(F,Q)&&Q!=="__proto__"&&Q!=="prototype"&&Q!=="constructor"}function ZQ(F,Q){let $=[...new Set(F)];if($.length>1)return`(${$.join(` ${Q} `)})`;return $[0]??"never"}function w$(F){if(F.path){let Q="";for(let $ of F.path)if(typeof $.key==="string"||typeof $.key==="number")if(Q)Q+=`.${$.key}`;else Q+=$.key;else return null;return Q}return null}var z$=/^#(?:[\da-fA-F]{3,4}|[\da-fA-F]{6}|[\da-fA-F]{8})$/u;function fF(F){return{kind:"validation",type:"hex_color",reference:fF,async:!1,expects:null,requirement:z$,message:F,"~run"(Q,$){if(Q.typed&&!this.requirement.test(Q.value))G(this,"hex color",Q,$);return Q}}}function vF(F,Q){return{kind:"validation",type:"max_value",reference:vF,async:!1,expects:`<=${F instanceof Date?F.toJSON():p(F)}`,requirement:F,message:Q,"~run"($,H){if($.typed&&!($.value<=this.requirement))G(this,"value",$,H,{received:$.value instanceof Date?$.value.toJSON():p($.value)});return $}}}function lF(F,Q){return{kind:"validation",type:"min_value",reference:lF,async:!1,expects:`>=${F instanceof Date?F.toJSON():p(F)}`,requirement:F,message:Q,"~run"($,H){if($.typed&&!($.value>=this.requirement))G(this,"value",$,H,{received:$.value instanceof Date?$.value.toJSON():p($.value)});return $}}}function O$(F,Q,$){return typeof F.fallback==="function"?F.fallback(Q,$):F.fallback}function MQ(F){let Q={};for(let $ of F)if($.path){let H=w$($);if(H){if(!Q.nested)Q.nested={};if(Q.nested[H])Q.nested[H].push($.message);else Q.nested[H]=[$.message]}else if(Q.other)Q.other.push($.message);else Q.other=[$.message]}else if(Q.root)Q.root.push($.message);else Q.root=[$.message];return Q}function pF(F,Q,$){return typeof F.default==="function"?F.default(Q,$):F.default}function QF(){return{kind:"schema",type:"any",reference:QF,expects:"any",async:!1,get "~standard"(){return N(this)},"~run"(F){return F.typed=!0,F}}}function x(F,Q){return{kind:"schema",type:"array",reference:x,expects:"Array",async:!1,item:F,message:Q,get "~standard"(){return N(this)},"~run"($,H){let M=$.value;if(Array.isArray(M)){$.typed=!0,$.value=[];for(let w=0;w<M.length;w++){let X=M[w],T=this.item["~run"]({value:X},H);if(T.issues){let O={type:"array",origin:"value",input:M,key:w,value:X};for(let R of T.issues){if(R.path)R.path.unshift(O);else R.path=[O];$.issues?.push(R)}if(!$.issues)$.issues=T.issues;if(H.abortEarly){$.typed=!1;break}}if(!T.typed)$.typed=!1;$.value.push(T.value)}}else G(this,"type",$,H);return $}}}function K(F){return{kind:"schema",type:"boolean",reference:K,expects:"boolean",async:!1,message:F,get "~standard"(){return N(this)},"~run"(Q,$){if(typeof Q.value==="boolean")Q.typed=!0;else G(this,"type",Q,$);return Q}}}function g(F){return{kind:"schema",type:"date",reference:g,expects:"Date",async:!1,message:F,get "~standard"(){return N(this)},"~run"(Q,$){if(Q.value instanceof Date)if(!isNaN(Q.value))Q.typed=!0;else G(this,"type",Q,$,{received:'"Invalid Date"'});else G(this,"type",Q,$);return Q}}}function P(F,Q){let $=[];for(let H in F)if(`${+H}`!==H||typeof F[H]!=="string"||!Object.is(F[F[H]],+H))$.push(F[H]);return{kind:"schema",type:"enum",reference:P,expects:ZQ($.map(p),"|"),async:!1,enum:F,options:$,message:Q,get "~standard"(){return N(this)},"~run"(H,M){if(this.options.includes(H.value))H.typed=!0;else G(this,"type",H,M);return H}}}function gF(F){return{kind:"schema",type:"function",reference:gF,expects:"Function",async:!1,message:F,get "~standard"(){return N(this)},"~run"(Q,$){if(typeof Q.value==="function")Q.typed=!0;else G(this,"type",Q,$);return Q}}}function h(F){return{kind:"schema",type:"lazy",reference:h,expects:"unknown",async:!1,getter:F,get "~standard"(){return N(this)},"~run"(Q,$){return this.getter(Q.value)["~run"](Q,$)}}}function Y(F,Q){return{kind:"schema",type:"literal",reference:Y,expects:p(F),async:!1,literal:F,message:Q,get "~standard"(){return N(this)},"~run"($,H){if($.value===this.literal)$.typed=!0;else G(this,"type",$,H);return $}}}function W(F,Q){return{kind:"schema",type:"nullable",reference:W,expects:`(${F.expects} | null)`,async:!1,wrapped:F,default:Q,get "~standard"(){return N(this)},"~run"($,H){if($.value===null){if(this.default!==void 0)$.value=pF(this,$,H);if($.value===null)return $.typed=!0,$}return this.wrapped["~run"]($,H)}}}function V(F){return{kind:"schema",type:"number",reference:V,expects:"number",async:!1,message:F,get "~standard"(){return N(this)},"~run"(Q,$){if(typeof Q.value==="number"&&!isNaN(Q.value))Q.typed=!0;else G(this,"type",Q,$);return Q}}}function Z(F,Q){return{kind:"schema",type:"object",reference:Z,expects:"Object",async:!1,entries:F,message:Q,get "~standard"(){return N(this)},"~run"($,H){let M=$.value;if(M&&typeof M==="object"){$.typed=!0,$.value={};for(let w in this.entries){let X=this.entries[w];if(w in M||(X.type==="exact_optional"||X.type==="optional"||X.type==="nullish")&&X.default!==void 0){let T=w in M?M[w]:pF(X),O=X["~run"]({value:T},H);if(O.issues){let R={type:"object",origin:"value",input:M,key:w,value:T};for(let A of O.issues){if(A.path)A.path.unshift(R);else A.path=[R];$.issues?.push(A)}if(!$.issues)$.issues=O.issues;if(H.abortEarly){$.typed=!1;break}}if(!O.typed)$.typed=!1;$.value[w]=O.value}else if(X.fallback!==void 0)$.value[w]=O$(X);else if(X.type!=="exact_optional"&&X.type!=="optional"&&X.type!=="nullish"){if(G(this,"key",$,H,{input:void 0,expected:`"${w}"`,path:[{type:"object",origin:"key",input:M,key:w,value:M[w]}]}),H.abortEarly)break}}}else G(this,"type",$,H);return $}}}function U(F,Q){return{kind:"schema",type:"optional",reference:U,expects:`(${F.expects} | undefined)`,async:!1,wrapped:F,default:Q,get "~standard"(){return N(this)},"~run"($,H){if($.value===void 0){if(this.default!==void 0)$.value=pF(this,$,H);if($.value===void 0)return $.typed=!0,$}return this.wrapped["~run"]($,H)}}}function D(F,Q,$){return{kind:"schema",type:"record",reference:D,expects:"Object",async:!1,key:F,value:Q,message:$,get "~standard"(){return N(this)},"~run"(H,M){let w=H.value;if(w&&typeof w==="object"){H.typed=!0,H.value={};for(let X in w)if(M$(w,X)){let T=w[X],O=this.key["~run"]({value:X},M);if(O.issues){let A={type:"object",origin:"key",input:w,key:X,value:T};for(let b of O.issues)b.path=[A],H.issues?.push(b);if(!H.issues)H.issues=O.issues;if(M.abortEarly){H.typed=!1;break}}let R=this.value["~run"]({value:T},M);if(R.issues){let A={type:"object",origin:"value",input:w,key:X,value:T};for(let b of R.issues){if(b.path)b.path.unshift(A);else b.path=[A];H.issues?.push(b)}if(!H.issues)H.issues=R.issues;if(M.abortEarly){H.typed=!1;break}}if(!O.typed||!R.typed)H.typed=!1;if(O.typed)H.value[O.value]=R.value}}else G(this,"type",H,M);return H}}}function J(F){return{kind:"schema",type:"string",reference:J,expects:"string",async:!1,message:F,get "~standard"(){return N(this)},"~run"(Q,$){if(typeof Q.value==="string")Q.typed=!0;else G(this,"type",Q,$);return Q}}}function JQ(F){let Q;if(F)for(let $ of F)if(Q)Q.push(...$.issues);else Q=$.issues;return Q}function z(F,Q){return{kind:"schema",type:"union",reference:z,expects:ZQ(F.map(($)=>$.expects),"|"),async:!1,options:F,message:Q,get "~standard"(){return N(this)},"~run"($,H){let M,w,X;for(let T of this.options){let O=T["~run"]({value:$.value},H);if(O.typed)if(O.issues)if(w)w.push(O);else w=[O];else{M=O;break}else if(X)X.push(O);else X=[O]}if(M)return M;if(w){if(w.length===1)return w[0];G(this,"type",$,H,{issues:JQ(w)}),$.typed=!0}else if(X?.length===1)return X[0];else G(this,"type",$,H,{issues:JQ(X)});return $}}}function mF(...F){return{...F[0],pipe:F,get "~standard"(){return N(this)},"~run"(Q,$){for(let H of F)if(H.kind!=="metadata"){if(Q.issues&&(H.kind==="schema"||H.kind==="transformation")){Q.typed=!1;break}if(!Q.issues||!$.abortEarly&&!$.abortPipeEarly)Q=H["~run"](Q,$)}return Q}}}function wQ(F,Q,$){let H=F["~run"]({value:Q},UQ($));return{typed:H.typed,success:!H.issues,output:H.value,issues:H.issues}}var y;((j)=>{j.List="List";j.ListItem="ListItem";j.ListItemDetail="ListItemDetail";j.ListItemAccessory="ListItemAccessory";j.ListSection="ListSection";j.ListItemDetailMetadata="ListItemDetailMetadata";j.ListItemDetailMetadataLabel="ListItemDetailMetadataLabel";j.ListItemDetailMetadataLink="ListItemDetailMetadataLink";j.ListItemDetailMetadataTagList="ListItemDetailMetadataTagList";j.ListItemDetailMetadataTagListItem="ListItemDetailMetadataTagListItem";j.ListItemDetailMetadataSeparator="ListItemDetailMetadataSeparator";j.Icon="Icon";j.EmptyView="EmptyView";j.Dropdown="Dropdown";j.DropdownSection="DropdownSection";j.DropdownItem="DropdownItem";j.ActionPanel="ActionPanel";j.Action="Action";j.ActionPanelSection="ActionPanelSection";j.ActionPanelSubmenu="ActionPanelSubmenu";j.Markdown="Markdown"})(y||={});var q=P(y),zF;((O)=>{O.Base="Base";O.Number="Number";O.Select="Select";O.Boolean="Boolean";O.Input="Input";O.Date="Date";O.Array="Array";O.Form="Form"})(zF||={});var HF=P(zF);var cF;((w)=>{w.Iconify="iconify";w.RemoteUrl="remote-url";w.Svg="svg";w.Base64PNG="base64-png";w.Text="text"})(cF||={});var zQ=P(cF),OQ=Z({type:zQ,value:J(),invert:U(K()),darkInvert:U(K()),hexColor:U(J()),bgColor:U(J())}),B=Z({...OQ.entries,fallback:U(h(()=>B))}),x$=Z({...OQ.entries,nodeName:q,fallback:U(h(()=>B))});var n=mF(J(),fF()),r1=Z({top:U(V()),right:U(V()),bottom:U(V()),left:U(V())}),o1=z([Y("light"),Y("dark"),Y("auto")]),n1=z([Y("zinc"),Y("slate"),Y("stone"),Y("gray"),Y("neutral"),Y("red"),Y("rose"),Y("orange"),Y("green"),Y("blue"),Y("yellow"),Y("violet")]),i1=mF(V(),lF(0),vF(1));var W$=Z({nodeName:q,icon:U(B),title:J(),value:J()}),uF=Z({nodeName:q,title:U(J()),items:x(z([W$]))});var OF=Z({nodeName:q,content:J()});var A8=Z({nodeName:q,title:U(J()),description:U(J()),icon:U(B)}),R$=Z({nodeName:q,title:J(),value:J(),icon:U(B),keywords:U(x(J()))}),X$=Z({nodeName:q,title:J(),items:x(R$)}),G8=Z({nodeName:q,tooltip:J(),sections:x(X$),defaultValue:J()}),T$=Z({nodeName:q,tag:U(z([J(),Z({color:n,text:J()})])),text:U(z([J(),Z({color:n,text:J()})])),date:U(z([g(),Z({color:n,text:g()})])),icon:U(B),tooltip:U(J())}),V$=Z({nodeName:Y("ListItemDetailMetadataLabel"),title:J(),icon:U(B),text:U(z([J(),Z({color:n,text:J()})]))}),K$=Z({nodeName:Y("ListItemDetailMetadataLink"),title:J(),text:J(),url:J()}),L$=Z({nodeName:Y("ListItemDetailMetadataTagListItem"),text:U(J()),color:U(n)}),j$=Z({nodeName:Y("ListItemDetailMetadataTagList"),title:J(),tags:x(L$)}),A$=Z({nodeName:Y("ListItemDetailMetadataSeparator")}),G$=z([V$,K$,j$,A$]),N$=Z({nodeName:Y("ListItemDetailMetadata"),items:x(G$)}),B$=Z({nodeName:Y("ListItemDetail"),children:x(z([OF,N$])),width:U(V())}),WQ=Z({nodeName:Y("ListItem"),title:J(),subTitle:U(J()),accessories:U(x(T$)),value:J(),defaultAction:U(J()),actions:U(uF),icon:U(B),keywords:U(x(J()))}),b$=Z({nodeName:Y("ListSection"),title:U(J()),subtitle:U(J()),items:x(WQ)}),C$=z([Y("items"),Y("detail"),Y("filter"),Y("sections"),Y("actions"),Y("defaultAction")]),N8=Z({nodeName:Y("List"),sections:U(x(b$)),items:U(x(WQ)),filter:z([Y("none"),Y("default")]),detail:U(B$),actions:U(uF),defaultAction:U(J()),inherits:U(x(C$))});var P$=z([Y("color"),Y("date"),Y("datetime-local"),Y("month"),Y("number"),Y("password"),Y("text"),Y("url"),Y("week"),Y("time"),Y("search")]),i=Z({nodeName:HF,key:J(),label:U(J()),hideLabel:U(K()),placeholder:U(J()),optional:U(K()),description:U(J()),default:U(QF())}),RQ=Z({...i.entries,type:U(P$),component:U(z([Y("textarea"),Y("default")])),default:U(J())}),XQ=Z({...i.entries,nodeName:HF,default:U(V())}),TQ=Z({...i.entries,options:x(J()),default:U(J())}),VQ=Z({...i.entries,component:U(z([Y("checkbox"),Y("switch")]))}),KQ=Z({...i.entries,default:U(J())}),q$=z([RQ,XQ,TQ,VQ,KQ]),S$=Z({...i.entries,content:q$}),E$=z([S$,TQ,RQ,XQ,VQ,KQ]),I$=Z({nodeName:HF,key:J(),showFormDataDebug:U(K()),fields:x(z([h(()=>I$),E$])),title:U(J()),description:U(J()),submitBtnText:U(J())});class jQ{nodeName="Icon";type;value;invert;darkInvert;hexColor;bgColor;constructor(F){this.type=F.type,this.value=F.value,this.invert=F.invert,this.darkInvert=F.darkInvert,this.hexColor=F.hexColor,this.bgColor=F.bgColor}toModel(){return{nodeName:this.nodeName,type:this.type,value:this.value,invert:this.invert,darkInvert:this.darkInvert,hexColor:this.hexColor,bgColor:this.bgColor}}}class D${nodeName="EmptyView";title;description;icon;constructor(F){this.title=F.title,this.description=F.description,this.icon=F.icon}toModel(){return{nodeName:this.nodeName,title:this.title,description:this.description,icon:this.icon?.toModel()}}}class k${nodeName="DropdownItem";title;value;icon;keywords;constructor(F){this.title=F.title,this.value=F.value,this.icon=F.icon,this.keywords=F.keywords}toModel(){return{nodeName:this.nodeName,title:this.title,value:this.value,icon:this.icon?.toModel(),keywords:this.keywords}}}class h${nodeName="DropdownSection";title;items;constructor(F){this.title=F.title,this.items=F.items}toModel(){return{nodeName:this.nodeName,title:this.title,items:this.items.map((F)=>F.toModel())}}}class _${nodeName="Dropdown";tooltip;sections;defaultValue;constructor(F){this.tooltip=F.tooltip,this.sections=F.sections,this.defaultValue=F.defaultValue}toModel(){return{nodeName:this.nodeName,tooltip:this.tooltip,sections:this.sections.map((F)=>F.toModel()),defaultValue:this.defaultValue}}}class y${nodeName="ListItemAccessory";tag;text;date;icon;tooltip;constructor(F){this.tag=F.tag,this.text=F.text,this.date=F.date,this.icon=F.icon,this.tooltip=F.tooltip}toModel(){return{nodeName:this.nodeName,tag:this.tag,text:this.text,date:this.date,icon:this.icon?.toModel(),tooltip:this.tooltip}}}class f${nodeName="ListItemDetailMetadataLabel";title;icon;text;constructor(F){this.title=F.title,this.icon=F.icon,this.text=F.text}toModel(){return{nodeName:this.nodeName,title:this.title,icon:this.icon?.toModel(),text:this.text}}}class v${nodeName="ListItemDetailMetadataLink";title;text;url;constructor(F){this.title=F.title,this.text=F.text,this.url=F.url}toModel(){return{nodeName:this.nodeName,title:this.title,text:this.text,url:this.url}}}class l${nodeName="ListItemDetailMetadataTagListItem";text;color;icon;constructor(F){this.text=F.text,this.color=F.color,this.icon=F.icon}toModel(){return{nodeName:this.nodeName,text:this.text,color:this.color}}}class p${nodeName="ListItemDetailMetadataTagList";title;tags;constructor(F){this.title=F.title,this.tags=F.tags}toModel(){return{nodeName:this.nodeName,title:this.title,tags:this.tags.map((F)=>F.toModel())}}}class g${nodeName="ListItemDetailMetadataSeparator";toModel(){return{nodeName:this.nodeName}}}class m${nodeName="ListItemDetailMetadata";items;constructor(F){this.items=F}toModel(){return{nodeName:this.nodeName,items:this.items.map((F)=>F.toModel())}}}class c${nodeName="ListItemDetail";children;width;constructor(F){this.children=F.children,this.width=F.width}toModel(){return{nodeName:this.nodeName,children:this.children.map((F)=>F.toModel()),width:this.width}}}class u${nodeName="ListItem";title;value;subTitle;accessories;icon;keywords;defaultAction;actions;constructor(F){this.title=F.title,this.value=F.value,this.actions=F.actions,this.defaultAction=F.defaultAction,this.subTitle=F.subTitle,this.accessories=F.accessories,this.icon=F.icon,this.keywords=F.keywords}toModel(){return{nodeName:this.nodeName,title:this.title,value:this.value,defaultAction:this.defaultAction,actions:this.actions?.toModel(),subTitle:this.subTitle,accessories:this.accessories?.map((F)=>F.toModel()),icon:this.icon?.toModel(),keywords:this.keywords}}}class r${nodeName="ListSection";title;items;constructor(F){this.title=F.title,this.items=F.items}toModel(){return{nodeName:this.nodeName,title:this.title,items:this.items.map((F)=>F.toModel())}}}class o${nodeName="List";sections;items;detail;filter;inherits;actions;defaultAction;constructor(F){this.sections=F.sections,this.items=F.items,this.detail=F.detail,this.filter=F.filter??"default",this.inherits=F.inherits??[],this.actions=F.actions,this.defaultAction=F.defaultAction}toModel(){return{nodeName:this.nodeName,sections:this.sections?.map((F)=>F.toModel()),items:this.items?.map((F)=>F.toModel()),filter:this.filter,detail:this.detail?.toModel(),inherits:this.inherits,actions:this.actions?.toModel(),defaultAction:this.defaultAction}}}class n${nodeName="Action";icon;title;value;constructor(F){this.icon=F.icon,this.title=F.title,this.value=F.value}toModel(){return{nodeName:this.nodeName,title:this.title,value:this.value,icon:this.icon}}}class i${nodeName="ActionPanel";title;items;constructor(F){this.title=F.title,this.items=F.items}toModel(){return{nodeName:this.nodeName,title:this.title,items:this.items.map((F)=>F.toModel())}}}var m={};eQ(m,{SelectField:()=>gQ,NumberField:()=>pQ,InputField:()=>lQ,Form:()=>rQ,DateField:()=>cQ,BooleanField:()=>mQ,BaseField:()=>v,ArrayField:()=>uQ});var f8=Z({name:J(),icon_path:W(J()),app_path_exe:W(J()),app_desktop_path:J()});var g8=D(J("Window label"),Z({path:J("Path to the extension"),processes:x(V()),dist:U(W(J()))})),m8=Z({extId:V(),identifier:J(),version:J(),enabled:K(),installed_at:J(),path:W(J()),data:W(QF())}),NQ;((T)=>{T.HeadlessWorker="headless_worker";T.Builtin="builtin";T.System="system";T.UiWorker="ui_worker";T.UiIframe="ui_iframe";T.QuickLink="quick_link";T.Remote="remote"})(NQ||={});var f=P(NQ),d$=Z({cmdId:V(),extId:V(),name:J(),type:f,data:J(),alias:W(U(J())),hotkey:W(U(J())),enabled:K()}),c8=Z({...d$.entries,data:Z({link:J(),icon:B})}),u8=Z({dataId:V(),extId:V(),dataType:J(),data:U(J()),searchText:U(J()),createdAt:g(),updatedAt:g()}),r8=Z({name:J(),value:J(),icon:W(B),keywords:W(x(J())),function:gF(),confirmRequired:K()});var BQ;(($)=>{$.Asc="ASC";$.Desc="DESC"})(BQ||={});var i8=P(BQ),bQ;((H)=>{H.ExactMatch="exact_match";H.Like="like";H.FTS="fts"})(bQ||={});var d8=P(bQ);var xF=z([Y("clipboard:read-all"),Y("clipboard:write-all"),Y("clipboard:read-text"),Y("clipboard:write-text"),Y("clipboard:read-image"),Y("clipboard:write-image"),Y("clipboard:read-files"),Y("clipboard:write-files")]),WF=z([Y("dialog:all")]),RF=z([Y("notification:all")]),XF=z([Y("fs:read"),Y("fs:write"),Y("fs:exists")]),TF=Y("os:all"),CQ=z([Y("shell:open"),Y("shell:execute"),Y("shell:kill-any")]),VF=Y("fetch:all"),KF=z([Y("system-info:all"),Y("system-info:memory"),Y("system-info:cpu"),Y("system-info:os"),Y("system-info:disk"),Y("system-info:network"),Y("system-info:battery"),Y("system-info:process"),Y("system-info:components")]),LF=z([Y("network:interface"),Y("network:port")]),jF=z([Y("updownload:download"),Y("updownload:upload")]),s$=z([xF,WF,RF,XF,TF,CQ,VF,KF,LF,jF]);var oF={readText:["clipboard:read-text","clipboard:read-all"],writeText:["clipboard:write-text","clipboard:write-all"],readImageBase64:["clipboard:read-all","clipboard:read-image"],readImageBinary:["clipboard:read-all","clipboard:read-image"],writeImageBase64:["clipboard:write-all","clipboard:write-image"],writeImageBinary:["clipboard:write-all","clipboard:write-image"],readFiles:["clipboard:read-all","clipboard:read-files"],writeFiles:["clipboard:write-all","clipboard:write-files"],readRtf:["clipboard:read-all","clipboard:read-text"],writeRtf:["clipboard:write-all","clipboard:write-text"],readHtml:["clipboard:read-all","clipboard:read-text"],writeHtml:["clipboard:write-all","clipboard:write-text"],writeHtmlAndText:["clipboard:write-all","clipboard:write-text"],hasText:[],hasRTF:[],hasHTML:[],hasImage:[],hasFiles:[]};var HH=z([xF,Y("clipboard:paste")]),PQ=z([Y("system:volumn"),Y("system:boot"),Y("system:disk"),Y("system:apps"),Y("system:fs"),Y("system:ui")]),qQ=z([XF,Y("fs:read-dir"),Y("fs:stat"),Y("fs:search")]),YH=z([Y("event:drag-drop"),Y("event:drag-enter"),Y("event:drag-leave"),Y("event:drag-over"),Y("event:window-blur"),Y("event:window-close-requested"),Y("event:window-focus")]),JH=z([Y("security:mac:reveal-security-pane"),Y("security:mac:verify-fingerprint"),Y("security:mac:reset-screencapture-permission"),Y("security:mac:request-permission"),Y("security:mac:check-permission"),Y("security:mac:all")]),UH=z([Y("hostname"),Y("osRelease"),Y("osUptime"),Y("loadavg"),Y("networkInterfaces"),Y("systemMemoryInfo"),Y("uid"),Y("gid"),Y("cpus"),J()]),ZH=Z({net:U(z([Y("*"),x(J())])),env:U(z([Y("*"),x(J())])),read:U(z([Y("*"),x(J())])),write:U(z([Y("*"),x(J())])),run:U(z([Y("*"),x(J())])),ffi:U(z([Y("*"),x(J())])),sys:U(z([Y("*"),x(UH)]))}),d=Z({path:U(J()),url:U(J()),cmd:U(Z({program:J(),args:x(J())})),...ZH.entries}),SQ=Z({permission:qQ,allow:U(x(d)),deny:U(x(d))}),EQ=z([Y("open:url"),Y("open:file"),Y("open:folder")]),IQ=Z({permission:EQ,allow:U(x(d)),deny:U(x(d))}),DQ=z([Y("shell:execute"),Y("shell:deno:execute"),Y("shell:spawn"),Y("shell:deno:spawn"),Y("shell:open"),Y("shell:kill"),Y("shell:kill-any"),Y("shell:all"),Y("shell:stdin-write")]),kQ=Z({permission:DQ,allow:U(x(d)),deny:U(x(d))}),nF=z([HH,YH,WF,RF,TF,DQ,VF,KF,LF,jF,PQ,JH]),MH=z([nF,qQ,EQ]);var WY={...oF,paste:["clipboard:paste"]};var iF;((H)=>{H.linux="linux";H.macos="macos";H.windows="windows"})(iF||={});var wH=P(iF),hQ=Object.values(iF),zH=Z({type:z([Y("text"),Y("regex")]),value:J()}),yQ;((H)=>{H.visible="visible";H.transparent="transparent";H.overlay="overlay"})(yQ||={});var OH=P(yQ),fQ=Z({center:U(W(K())),x:U(W(V())),y:U(W(V())),width:U(W(V())),height:U(W(V())),minWidth:U(W(V())),minHeight:U(W(V())),maxWidth:U(W(V())),maxHeight:U(W(V())),resizable:U(W(K())),title:U(W(J())),fullscreen:U(W(K())),focus:U(W(K())),transparent:U(W(K())),maximized:U(W(K())),visible:U(W(K())),decorations:U(W(K())),alwaysOnTop:U(W(K())),alwaysOnBottom:U(W(K())),contentProtected:U(W(K())),skipTaskbar:U(W(K())),shadow:U(W(K())),titleBarStyle:U(W(OH)),hiddenTitle:U(W(K())),tabbingIdentifier:U(W(J())),maximizable:U(W(K())),minimizable:U(W(K())),closable:U(W(K())),parent:U(W(J())),visibleOnAllWorkspaces:U(W(K()))}),dF=Z({main:J("HTML file to load, e.g. dist/index.html"),description:U(W(J("Description of the Command"),""),""),name:J("Name of the command"),cmds:x(zH,"Commands to trigger the UI"),icon:U(B),platforms:U(W(x(wH,"Platforms available on. Leave empty for all platforms."),hQ),hQ)}),xH=Z({...dF.entries,type:U(f,f.enum.UiIframe),dist:J("Dist folder to load, e.g. dist, build, out"),devMain:J("URL to load in development to support live reload, e.g. http://localhost:5173/"),window:U(W(fQ))}),WH=Z({...dF.entries,type:U(f,f.enum.UiWorker),window:U(W(fQ))}),RH=Z({...dF.entries,type:U(f,f.enum.HeadlessWorker)}),XH=z([nF,SQ,IQ,kQ]),TH=Z({name:J("Name of the extension (Human Readable)"),shortDescription:J("Description of the extension (Will be displayed in store)"),longDescription:J("Long description of the extension (Will be displayed in store)"),identifier:J("Unique identifier for the extension, must be the same as extension folder name"),icon:B,permissions:x(XH,"Permissions Declared by the extension. e.g. clipboard-all. Not declared APIs will be blocked."),demoImages:x(J("Demo images for the extension")),customUiCmds:U(x(xH,"Custom UI Commands")),templateUiCmds:U(x(WH,"Template UI Commands")),headlessCmds:U(x(RH,"Headless Commands"))}),_Q=z([Z({name:J("GitHub Username"),email:U(W(J("Email of the person"))),url:U(W(J("URL of the person")))}),J("GitHub Username")]),VH=z([Y("AGPL-3.0-only"),Y("Apache-2.0"),Y("BSD-2-Clause"),Y("BSD-3-Clause"),Y("BSL-1.0"),Y("CC0-1.0"),Y("CDDL-1.0"),Y("CDDL-1.1"),Y("EPL-1.0"),Y("EPL-2.0"),Y("GPL-2.0-only"),Y("GPL-3.0-only"),Y("ISC"),Y("LGPL-2.0-only"),Y("LGPL-2.1-only"),Y("LGPL-2.1-or-later"),Y("LGPL-3.0-only"),Y("LGPL-3.0-or-later"),Y("MIT"),Y("MPL-2.0"),Y("MS-PL"),Y("UNLICENSED")]),KH=Z({name:J("Package name for the extension (just a regular npm package name)"),version:J("Version of the extension"),readme:U(J("Custom README.md path of the extension")),license:VH,author:U(_Q),draft:U(K("Whether the extension is a draft, draft will not be published")),contributors:U(x(_Q,"Contributors of the extension")),repository:U(z([J("URL of the repository"),Z({type:J("Type of the repository"),url:J("URL of the repository"),directory:U(J("Directory of the repository"))})])),dependencies:U(D(J(),J())),kunkun:TH,files:U(x(J("Files to include in the extension. e.g. ['dist']")))}),bY=Z({...KH.entries,...{extPath:J(),extFolderName:J()}});var LH=Z({addresses:x(J()),fullname:J(),hostname:J(),port:V(),service_type:J(),subType:U(J()),properties:U(D(J(),J())),publicKey:J(),sslCert:J()}),qY=D(J(),LH);var vQ=Z({filename:J(),fileSize:V(),id:J(),type:V(),children:x(h(()=>vQ))}),EY=Z({port:J(),code:J(),totalBytes:V(),totalFiles:V(),sslCert:J(),root:h(()=>vQ),ip:J()}),IY=Z({code:J(),idPathMap:D(J(),J())});class v{nodeName="Base";key;label;hideLabel;placeholder;optional;description;default;constructor(F){this.key=F.key,this.key=F.key,this.label=F.label,this.hideLabel=F.hideLabel,this.placeholder=F.placeholder,this.optional=F.optional,this.description=F.description,this.default=F.default}toModel(){return{nodeName:this.nodeName,key:this.key,label:this.label,hideLabel:this.hideLabel,placeholder:this.placeholder,optional:this.optional,description:this.description,default:this.default}}}class lQ extends v{nodeName="Input";component;constructor(F){super(F);this.component=F.component}toModel(){return{...super.toModel(),component:this.component}}}class pQ extends v{nodeName="Number"}class gQ extends v{nodeName="Select";options;constructor(F){super(F);this.options=F.options}toModel(){return{...super.toModel(),options:this.options}}}class mQ extends v{nodeName="Boolean";component;constructor(F){super(F);this.component=F.component??"checkbox"}toModel(){return{...super.toModel(),component:this.component}}}class cQ extends v{nodeName="Date"}class uQ extends v{nodeName="Array";content;constructor(F){super(F);this.content=F.content}toModel(){return{...super.toModel(),content:this.content.toModel()}}}class rQ{nodeName="Form";fields;showFormDataDebug;key;title;description;submitBtnText;constructor(F){this.fields=F.fields,this.key=F.key,this.title=F.title,this.description=F.description,this.submitBtnText=F.submitBtnText,this.showFormDataDebug=F.showFormDataDebug}toModel(){return{nodeName:this.nodeName,key:this.key,title:this.title,description:this.description,submitBtnText:this.submitBtnText,fields:this.fields.map((F)=>F.toModel())}}}class YF{nodeName="Markdown";content;constructor(F){this.content=F}toModel(){return{nodeName:this.nodeName,content:this.content}}}var AH=new qF,oQ=new _(AH,{}),c=oQ.getAPI();function nQ(F){oQ.expose(F)}var Z6=QQ(c.event),M6=EF(c.fetch),iQ=$Q(c.path),AF=HQ(c.shell),k=YQ(c.toast),w6=IF(c.updownload),{db:z6,kv:O6,os:x6,clipboard:GF,dialog:W6,fs:R6,log:X6,notification:T6,sysInfo:V6,network:K6,system:L6,open:j6,utils:A6,app:G6,security:N6,helper:B6,workerUi:E}=c;async function GH(){let F=await iQ.downloadDir(),{rpcChannel:Q,process:$,command:H}=await AF.createDenoRpcChannel("$EXTENSION/deno-src/index.ts",[],{allowAllEnv:!0,allowAllFfi:!0,allowAllRead:!0,allowAllWrite:!0,allowAllSys:!0,allowAllRun:!0,allowAllNet:!0,cwd:F,env:{FFMPEG_PATH:"/opt/homebrew/bin/ffmpeg",FFPROBE_PATH:"/opt/homebrew/bin/ffprobe"}},{});return H.stderr.on("data",(w)=>{if(console.warn(w),w.includes("Conversion failed!"))k.error("Conversion failed!")}),{api:Q.getAPI(),rpcChannel:Q,process:$,command:H}}var NH=Z({url:J(),resolutions:J()});class dQ extends wF{rpc;videoProgress=0;audioProgress=0;mergeProgress=0;isDownloading=!1;mergeStarted=!1;updateTotalProgress(){if(!this.isDownloading)return;let F=(this.videoProgress+this.audioProgress)*0.25;console.log("this.audioProgress",this.audioProgress,"this.videoProgress",this.videoProgress);let Q=F+this.mergeProgress;E.setProgressBar(Math.min(Q,0.99)*100)}async onFormSubmit(F){E.showLoadingBar(!0),console.log("Form submitted",F),this.mergeStarted=!1;let Q=wQ(NH,F);if(!Q.success){k.error("Invalid form data",{description:MQ(Q.issues).root?.join(".")||""});return}let{url:$,resolutions:H}=Q.output;this.videoProgress=0,this.audioProgress=0,this.mergeProgress=0,this.isDownloading=!0,E.showLoadingBar(!0),this.rpc?.api.downloadVideo($,H,()=>{k.info("Downloading, it will take a while...")},(M)=>{},(M)=>{console.log("audio progress",M)},(M)=>{if(console.log("merge progress",M),!this.mergeStarted)this.mergeStarted=!0,k.info("Start merging video and audio, please wait...")},()=>{this.isDownloading=!1,E.showLoadingBar(!1),k.success("Finished Downloading!")}).catch((M)=>{E.showLoadingBar(!1),this.isDownloading=!1,k.error("Error downloading video",{description:M.message})})}async load(){if(!await AF.hasCommand("ffmpeg"))return k.error("ffmpeg not found",{description:"Kunkun has helper command for installing ffmpeg. Search for ffmpeg."}),E.goBack();if(!await GF.hasText())return k.warning("No text found in clipboard"),E.goBack();let $=await GF.readText();if($="https://youtu.be/-b1FogYHTZc",!$.includes("youtube.com")&&!$.includes("youtu.be"))return k.warning("Invalid YouTube URL from clipboard"),E.goBack();E.render(new YF(`
# Download YouTube Video

Loading Information from YouTube URL: ${$}
`)),this.rpc=await GH();let H=await this.rpc.api.getAvailableResolutions($),M=new m.Form({title:"Download YouTube Video",description:`Please copy a YouTube URL then enter this extension. 
      High Resolution video (e.g. 4K) could take a very long time to download, please be patient. 
      A progress bar with estimated time isn't implemented yet. There is a loading bar on the top.`,key:"download-youtube-video",showFormDataDebug:!0,submitBtnText:"Download",fields:[new m.InputField({key:"url",label:"URL",default:$}),new m.SelectField({key:"resolutions",label:"Resolutions",default:H[0].qualityLabel,options:H.map((w)=>w.qualityLabel),description:"Select a resolution"})]});return console.log(M),console.log(M.toModel()),E.render(M)}async onBeforeGoBack(){if(this.rpc)await this.rpc.process.kill()}async onActionSelected(F){switch(F){case"open":break;default:break}}onSearchTermChange(F){return console.log("Search term changed to:",F),Promise.resolve()}onListItemSelected(F){return console.log("Item selected:",F),Promise.resolve()}}nQ(new dQ);
